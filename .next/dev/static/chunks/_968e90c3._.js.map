{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/user/webrtc-client/hooks/useDeviceInfo.ts"],"sourcesContent":["'use client'\r\n\r\nimport { useEffect, useState } from 'react'\r\n\r\nexport interface RegisterDevice {\r\n  name: string\r\n  deviceType: 'Mobile' | 'Web' | 'PC'\r\n  deviceIp: string\r\n  deviceModel?: string\r\n}\r\n\r\n\r\nexport interface DeviceData {\r\n    deviceInfo: RegisterDevice;\r\n    pairedDevices: string[];\r\n    active: boolean;\r\n}\r\n\r\n\r\nexport function useDeviceInfo() {\r\n  const [deviceInfo, setDeviceInfo] = useState<RegisterDevice | null>(null)\r\n  const [loading, setLoading] = useState(true)\r\n\r\n  const getDeviceType = (): 'Mobile' | 'Web' | 'PC' => {\r\n    const ua = navigator.userAgent\r\n    if (/mobile/i.test(ua)) return 'Mobile'\r\n    if (/windows|macintosh|linux/i.test(ua)) return 'PC'\r\n    return 'Web'\r\n  }\r\n\r\n  const getDeviceIp = async (): Promise<string> => {\r\n    try {\r\n      const res = await fetch('https://api.ipify.org?format=json')\r\n      const data = await res.json()\r\n      return data.ip\r\n    } catch {\r\n      return 'Unknown'\r\n    }\r\n  }\r\n\r\n  const getDeviceModel = (): string => {\r\n    const ua = navigator.userAgent\r\n    if (/iPhone/i.test(ua)) return 'iPhone'\r\n    if (/iPad/i.test(ua)) return 'iPad'\r\n    if (/Android/i.test(ua)) {\r\n      const match = ua.match(/Android.*?;\\s*(.*?)\\s*(Build|\\))/)\r\n      return match ? match[1] : 'Android Device'\r\n    }\r\n    if (/Mac/i.test(ua)) return 'Mac'\r\n    if (/Windows/i.test(ua)) return 'Windows PC'\r\n    return 'Unknown'\r\n  }\r\n\r\n  const collectDeviceInfo = async (): Promise<RegisterDevice> => {\r\n    const name = navigator.userAgent\r\n    const deviceType = getDeviceType()\r\n    const deviceModel = getDeviceModel()\r\n    const deviceIp = await getDeviceIp()\r\n    return { name, deviceType, deviceIp, deviceModel }\r\n  }\r\n\r\n  useEffect(() => {\r\n    const fetchDeviceInfo = async () => {\r\n      const info = await collectDeviceInfo()\r\n      setDeviceInfo(info)\r\n      setLoading(false)\r\n    }\r\n\r\n    fetchDeviceInfo()\r\n  }, [])\r\n\r\n  return { deviceInfo, loading }\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;;AAFA;;AAmBO,SAAS;;IACd,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,yKAAQ,EAAwB;IACpE,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IAEvC,MAAM,gBAAgB;QACpB,MAAM,KAAK,UAAU,SAAS;QAC9B,IAAI,UAAU,IAAI,CAAC,KAAK,OAAO;QAC/B,IAAI,2BAA2B,IAAI,CAAC,KAAK,OAAO;QAChD,OAAO;IACT;IAEA,MAAM,cAAc;QAClB,IAAI;YACF,MAAM,MAAM,MAAM,MAAM;YACxB,MAAM,OAAO,MAAM,IAAI,IAAI;YAC3B,OAAO,KAAK,EAAE;QAChB,EAAE,OAAM;YACN,OAAO;QACT;IACF;IAEA,MAAM,iBAAiB;QACrB,MAAM,KAAK,UAAU,SAAS;QAC9B,IAAI,UAAU,IAAI,CAAC,KAAK,OAAO;QAC/B,IAAI,QAAQ,IAAI,CAAC,KAAK,OAAO;QAC7B,IAAI,WAAW,IAAI,CAAC,KAAK;YACvB,MAAM,QAAQ,GAAG,KAAK,CAAC;YACvB,OAAO,QAAQ,KAAK,CAAC,EAAE,GAAG;QAC5B;QACA,IAAI,OAAO,IAAI,CAAC,KAAK,OAAO;QAC5B,IAAI,WAAW,IAAI,CAAC,KAAK,OAAO;QAChC,OAAO;IACT;IAEA,MAAM,oBAAoB;QACxB,MAAM,OAAO,UAAU,SAAS;QAChC,MAAM,aAAa;QACnB,MAAM,cAAc;QACpB,MAAM,WAAW,MAAM;QACvB,OAAO;YAAE;YAAM;YAAY;YAAU;QAAY;IACnD;IAEA,IAAA,0KAAS;mCAAC;YACR,MAAM;2DAAkB;oBACtB,MAAM,OAAO,MAAM;oBACnB,cAAc;oBACd,WAAW;gBACb;;YAEA;QACF;kCAAG,EAAE;IAEL,OAAO;QAAE;QAAY;IAAQ;AAC/B;GArDgB","debugId":null}},
    {"offset": {"line": 80, "column": 0}, "map": {"version":3,"sources":["file:///home/user/webrtc-client/hooks/useSocket.ts"],"sourcesContent":["'use client'\r\n\r\nimport { useEffect, useRef, useState, useCallback } from 'react'\r\nimport { io, Socket } from 'socket.io-client'\r\n\r\nconst SOCKET_URL = process.env.NEXT_PUBLIC_SOCKET_URL || 'https://werbrtc-server.onrender.com'\r\n\r\nlet socketInstance: Socket | null = null\r\n\r\nexport function useSocket() {\r\n  const [isConnected, setIsConnected] = useState(false)\r\n  const socketRef = useRef<Socket | null>(null)\r\n\r\n  const getSocket = useCallback(() => {\r\n    if (!socketInstance) {\r\n      socketInstance = io(SOCKET_URL, {\r\n        transports: ['websocket'],\r\n        reconnection: true,\r\n        reconnectionAttempts: 5,\r\n        reconnectionDelay: 1000,\r\n        autoConnect: false, \r\n      })\r\n    }\r\n    return socketInstance\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    const socket = getSocket()\r\n    socketRef.current = socket\r\n\r\n    const handleConnect = () => setIsConnected(true)\r\n    const handleDisconnect = () => setIsConnected(false)\r\n\r\n    socket.on('connect', handleConnect)\r\n    socket.on('disconnect', handleDisconnect)\r\n\r\n    return () => {\r\n      socket.off('connect', handleConnect)\r\n      socket.off('disconnect', handleDisconnect)\r\n    }\r\n  }, [getSocket])\r\n\r\n  const connect = useCallback(() => {\r\n    socketRef.current?.connect()\r\n  }, [])\r\n\r\n  const disconnect = useCallback(() => {\r\n    socketRef.current?.disconnect()\r\n  }, [])\r\n\r\n  const emit = useCallback(<T,>(event: string, data?: T) => {\r\n    socketRef.current?.emit(event, data)\r\n  }, [])\r\n\r\n  const on = useCallback((event: string, callback: (...args: any[]) => void) => {\r\n    socketRef.current?.on(event, callback)\r\n    return () => socketRef.current?.off(event, callback)\r\n  }, [])\r\n\r\n  return { socket: socketRef.current, isConnected, connect, disconnect, emit, on }\r\n}\r\n"],"names":[],"mappings":";;;;AAKmB;AAHnB;AACA;;AAHA;;;AAKA,MAAM,aAAa,2KAAO,CAAC,GAAG,CAAC,sBAAsB,IAAI;AAEzD,IAAI,iBAAgC;AAE7B,SAAS;;IACd,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,yKAAQ,EAAC;IAC/C,MAAM,YAAY,IAAA,uKAAM,EAAgB;IAExC,MAAM,YAAY,IAAA,4KAAW;4CAAC;YAC5B,IAAI,CAAC,gBAAgB;gBACnB,iBAAiB,IAAA,wLAAE,EAAC,YAAY;oBAC9B,YAAY;wBAAC;qBAAY;oBACzB,cAAc;oBACd,sBAAsB;oBACtB,mBAAmB;oBACnB,aAAa;gBACf;YACF;YACA,OAAO;QACT;2CAAG,EAAE;IAEL,IAAA,0KAAS;+BAAC;YACR,MAAM,SAAS;YACf,UAAU,OAAO,GAAG;YAEpB,MAAM;qDAAgB,IAAM,eAAe;;YAC3C,MAAM;wDAAmB,IAAM,eAAe;;YAE9C,OAAO,EAAE,CAAC,WAAW;YACrB,OAAO,EAAE,CAAC,cAAc;YAExB;uCAAO;oBACL,OAAO,GAAG,CAAC,WAAW;oBACtB,OAAO,GAAG,CAAC,cAAc;gBAC3B;;QACF;8BAAG;QAAC;KAAU;IAEd,MAAM,UAAU,IAAA,4KAAW;0CAAC;YAC1B,UAAU,OAAO,EAAE;QACrB;yCAAG,EAAE;IAEL,MAAM,aAAa,IAAA,4KAAW;6CAAC;YAC7B,UAAU,OAAO,EAAE;QACrB;4CAAG,EAAE;IAEL,MAAM,OAAO,IAAA,4KAAW;uCAAC,CAAK,OAAe;YAC3C,UAAU,OAAO,EAAE,KAAK,OAAO;QACjC;sCAAG,EAAE;IAEL,MAAM,KAAK,IAAA,4KAAW;qCAAC,CAAC,OAAe;YACrC,UAAU,OAAO,EAAE,GAAG,OAAO;YAC7B;6CAAO,IAAM,UAAU,OAAO,EAAE,IAAI,OAAO;;QAC7C;oCAAG,EAAE;IAEL,OAAO;QAAE,QAAQ,UAAU,OAAO;QAAE;QAAa;QAAS;QAAY;QAAM;IAAG;AACjF;GAnDgB","debugId":null}},
    {"offset": {"line": 175, "column": 0}, "map": {"version":3,"sources":["file:///home/user/webrtc-client/hooks/useWebRTC.ts"],"sourcesContent":["'use client'\r\n\r\nimport { useCallback, useRef, useEffect, useState } from 'react'\r\n\r\ninterface UseWebRTCProps {\r\n  emit: (event: string, data: any) => void\r\n  on: (event: string, callback: (...args: any[]) => void) => () => void\r\n  isSocketConnected: boolean\r\n}\r\n\r\nexport function useWebRTC({ emit, on, isSocketConnected }: UseWebRTCProps) {\r\n  const peerConnectionsRef = useRef<Map<string, RTCPeerConnection>>(new Map())\r\n  const dataChannelsRef = useRef<Map<string, RTCDataChannel>>(new Map())\r\n  const negotiatingRef = useRef<Set<string>>(new Set())\r\n  // âœ… Store pending ICE candidates\r\n  const pendingCandidatesRef = useRef<Map<string, RTCIceCandidateInit[]>>(new Map())\r\n  \r\n  const [connectionStatuses, setConnectionStatuses] = useState<Map<string, any>>(new Map())\r\n  const [receivedMessages, setReceivedMessages] = useState<any[]>([])\r\n\r\n  const iceServers = {\r\n    iceServers: [\r\n      { urls: 'stun:stun.l.google.com:19302' },\r\n      { urls: 'stun:stun1.l.google.com:19302' }\r\n    ],\r\n    iceCandidatePoolSize: 10\r\n  }\r\n\r\n  const updateConnectionStatus = useCallback((deviceIp: string, status: string) => {\r\n    console.log(`ðŸ“Š Status update for ${deviceIp}:`, status)\r\n    setConnectionStatuses(prev => {\r\n      const newMap = new Map(prev)\r\n      newMap.set(deviceIp, { deviceIp, status })\r\n      return newMap\r\n    })\r\n  }, [])\r\n\r\n  const cleanupPeerConnection = useCallback((deviceIp: string) => {\r\n    const pc = peerConnectionsRef.current.get(deviceIp)\r\n    const dc = dataChannelsRef.current.get(deviceIp)\r\n\r\n    if (dc) {\r\n      dc.close()\r\n      dataChannelsRef.current.delete(deviceIp)\r\n    }\r\n\r\n    if (pc) {\r\n      pc.close()\r\n      peerConnectionsRef.current.delete(deviceIp)\r\n    }\r\n\r\n    negotiatingRef.current.delete(deviceIp)\r\n    pendingCandidatesRef.current.delete(deviceIp) // âœ… Clear pending candidates\r\n    updateConnectionStatus(deviceIp, 'disconnected')\r\n    console.log(`ðŸ§¹ Cleaned up ${deviceIp}`)\r\n  }, [updateConnectionStatus])\r\n\r\n  // âœ… FIXED: Handle negotiation properly\r\n  const handleNegotiationNeeded = useCallback(async (deviceIp: string, peerConnection: RTCPeerConnection) => {\r\n    if (negotiatingRef.current.has(deviceIp)) {\r\n      console.log(`â³ Already negotiating for ${deviceIp}, skipping...`)\r\n      return\r\n    }\r\n\r\n    // âœ… Check signaling state\r\n    if (peerConnection.signalingState !== 'stable') {\r\n      console.log(`âš ï¸ Signaling state not stable for ${deviceIp}: ${peerConnection.signalingState}`)\r\n      return\r\n    }\r\n\r\n    negotiatingRef.current.add(deviceIp)\r\n    console.log(`ðŸ”„ Negotiation needed for ${deviceIp}`)\r\n\r\n    try {\r\n      console.log(`ðŸ“ Creating offer for ${deviceIp}`)\r\n      const offer = await peerConnection.createOffer()\r\n\r\n      console.log(`ðŸ“ Setting local description for ${deviceIp}`)\r\n      await peerConnection.setLocalDescription(offer)\r\n\r\n      console.log(`ðŸ“¤ Sending offer to ${deviceIp}`)\r\n      emit('offer', {\r\n        targetIp: deviceIp,\r\n        sdp: peerConnection.localDescription\r\n      })\r\n\r\n      console.log(`âœ… Offer sent for ${deviceIp}`)\r\n    } catch (error) {\r\n      console.error(`âŒ Negotiation error for ${deviceIp}:`, error)\r\n      updateConnectionStatus(deviceIp, 'failed')\r\n    } finally {\r\n      // âœ… Remove negotiating flag after a delay\r\n      setTimeout(() => {\r\n        negotiatingRef.current.delete(deviceIp)\r\n      }, 1000)\r\n    }\r\n  }, [emit, updateConnectionStatus])\r\n\r\n  const connectToDevice = useCallback(async (device: any) => {\r\n    const targetIp = device?.deviceInfo?.deviceIp\r\n    if (!targetIp) {\r\n      console.error('âŒ No device IP found')\r\n      throw new Error('No device IP found')\r\n    }\r\n\r\n    updateConnectionStatus(targetIp, 'connecting')\r\n\r\n    if (peerConnectionsRef.current.has(targetIp)) {\r\n      cleanupPeerConnection(targetIp)\r\n      await new Promise(resolve => setTimeout(resolve, 500))\r\n    }\r\n\r\n    const peerConnection = new RTCPeerConnection(iceServers)\r\n    peerConnectionsRef.current.set(targetIp, peerConnection)\r\n\r\n    // âœ… Create data channel\r\n    const dataChannel = peerConnection.createDataChannel('fileChannel', {\r\n      ordered: true,\r\n      maxRetransmits: 10\r\n    })\r\n    dataChannelsRef.current.set(targetIp, dataChannel)\r\n\r\n    // âœ… FIXED: Only handle negotiation when needed\r\n    peerConnection.onnegotiationneeded = async () => {\r\n      console.log(`ðŸ”„ negotiationneeded event for ${targetIp}`)\r\n      await handleNegotiationNeeded(targetIp, peerConnection)\r\n    }\r\n\r\n    dataChannel.onopen = () => {\r\n      console.log(`âœ… Data channel opened for ${targetIp}`)\r\n      updateConnectionStatus(targetIp, 'connected')\r\n    }\r\n\r\n    dataChannel.onclose = () => {\r\n      console.log(`ðŸ”´ Data channel closed for ${targetIp}`)\r\n      updateConnectionStatus(targetIp, 'disconnected')\r\n    }\r\n\r\n    dataChannel.onmessage = (event) => {\r\n      console.log(`ðŸ“¦ Message from ${targetIp}:`, event.data)\r\n      try {\r\n        const parsed = JSON.parse(event.data)\r\n        if (parsed.type === 'message') {\r\n          setReceivedMessages(prev => [...prev, {\r\n            from: targetIp,\r\n            message: parsed.content,\r\n            timestamp: Date.now()\r\n          }])\r\n        }\r\n      } catch {}\r\n    }\r\n\r\n    dataChannel.onerror = (error) => {\r\n      console.error(`âŒ Channel error for ${targetIp}:`, error)\r\n      updateConnectionStatus(targetIp, 'failed')\r\n    }\r\n\r\n    peerConnection.onicecandidate = (event) => {\r\n      if (event.candidate) {\r\n        console.log(`ðŸŒ ICE candidate for ${targetIp}`)\r\n        emit('ice-candidate', {\r\n          targetIp,\r\n          candidate: event.candidate\r\n        })\r\n      }\r\n    }\r\n\r\n    peerConnection.oniceconnectionstatechange = () => {\r\n      const state = peerConnection.iceConnectionState\r\n      console.log(`ðŸ”„ ICE state for ${targetIp}:`, state)\r\n\r\n      if (state === 'connected' || state === 'completed') {\r\n        updateConnectionStatus(targetIp, 'connected')\r\n      } else if (state === 'failed' || state === 'disconnected') {\r\n        updateConnectionStatus(targetIp, 'disconnected')\r\n      }\r\n    }\r\n\r\n    // âœ… REMOVED: Don't manually trigger negotiation - let onnegotiationneeded handle it\r\n    // The data channel creation will automatically trigger negotiationneeded\r\n\r\n  }, [emit, updateConnectionStatus, cleanupPeerConnection, handleNegotiationNeeded, iceServers])\r\n\r\n  const sendMessage = useCallback((deviceIp: string, message: string) => {\r\n    const dataChannel = dataChannelsRef.current.get(deviceIp)\r\n    \r\n    if (!dataChannel || dataChannel.readyState !== 'open') {\r\n      console.error(`âŒ Channel not open for ${deviceIp}`)\r\n      return false\r\n    }\r\n\r\n    dataChannel.send(JSON.stringify({\r\n      type: 'message',\r\n      content: message\r\n    }))\r\n    return true\r\n  }, [])\r\n\r\n  const disconnectFromDevice = useCallback((deviceIp: string) => {\r\n    cleanupPeerConnection(deviceIp)\r\n  }, [cleanupPeerConnection])\r\n\r\n  const isDeviceConnected = useCallback((deviceIp: string) => {\r\n    const status = connectionStatuses.get(deviceIp)\r\n    return status?.status === 'connected'\r\n  }, [connectionStatuses])\r\n\r\n  // âœ… FIXED: Handle incoming offers\r\n  useEffect(() => {\r\n    if (!isSocketConnected) return\r\n\r\n    const unsubscribeOffer = on('offer', async ({ from, sdp }: any) => {\r\n      console.log(`ðŸ“¨ Offer received from ${from}`)\r\n      updateConnectionStatus(from, 'connecting')\r\n\r\n      if (peerConnectionsRef.current.has(from)) {\r\n        cleanupPeerConnection(from)\r\n        await new Promise(resolve => setTimeout(resolve, 500))\r\n      }\r\n\r\n      const peerConnection = new RTCPeerConnection(iceServers)\r\n      peerConnectionsRef.current.set(from, peerConnection)\r\n\r\n      peerConnection.ondatachannel = (event) => {\r\n        const channel = event.channel\r\n        dataChannelsRef.current.set(from, channel)\r\n\r\n        channel.onopen = () => {\r\n          console.log(`âœ… Channel opened (receiver) from ${from}`)\r\n          updateConnectionStatus(from, 'connected')\r\n        }\r\n\r\n        channel.onmessage = (e) => {\r\n          console.log(`ðŸ“¥ Message from ${from}:`, e.data)\r\n          try {\r\n            const parsed = JSON.parse(e.data)\r\n            if (parsed.type === 'message') {\r\n              setReceivedMessages(prev => [...prev, {\r\n                from,\r\n                message: parsed.content,\r\n                timestamp: Date.now()\r\n              }])\r\n            }\r\n          } catch {}\r\n        }\r\n\r\n        channel.onerror = (error) => {\r\n          console.error(`âŒ Channel error:`, error)\r\n          updateConnectionStatus(from, 'failed')\r\n        }\r\n      }\r\n\r\n      peerConnection.onicecandidate = (event) => {\r\n        if (event.candidate) {\r\n          emit('ice-candidate', {\r\n            targetIp: from,\r\n            candidate: event.candidate\r\n          })\r\n        }\r\n      }\r\n\r\n      peerConnection.oniceconnectionstatechange = () => {\r\n        const state = peerConnection.iceConnectionState\r\n        console.log(`ðŸ”„ ICE state (receiver) ${from}:`, state)\r\n        \r\n        if (state === 'connected' || state === 'completed') {\r\n          updateConnectionStatus(from, 'connected')\r\n        } else if (state === 'failed' || state === 'disconnected') {\r\n          updateConnectionStatus(from, 'disconnected')\r\n        }\r\n      }\r\n\r\n      try {\r\n        console.log(`ðŸ“ Setting remote (offer) for ${from}`)\r\n        await peerConnection.setRemoteDescription(new RTCSessionDescription(sdp))\r\n        console.log(`âœ… Remote set for ${from}`)\r\n\r\n        // âœ… Process pending ICE candidates after setting remote description\r\n        const pending = pendingCandidatesRef.current.get(from) || []\r\n        for (const candidate of pending) {\r\n          try {\r\n            await peerConnection.addIceCandidate(new RTCIceCandidate(candidate))\r\n            console.log(`âœ… Added pending ICE candidate for ${from}`)\r\n          } catch (error) {\r\n            console.error(`âŒ Error adding pending candidate:`, error)\r\n          }\r\n        }\r\n        pendingCandidatesRef.current.delete(from)\r\n\r\n        console.log(`ðŸ“ Creating answer for ${from}`)\r\n        const answer = await peerConnection.createAnswer()\r\n        console.log(`âœ… Answer created for ${from}`)\r\n\r\n        console.log(`ðŸ“ Setting local (answer) for ${from}`)\r\n        await peerConnection.setLocalDescription(answer)\r\n        console.log(`âœ… Local set for ${from}`)\r\n\r\n        console.log(`ðŸ“¤ Sending answer to ${from}`)\r\n        emit('answer', {\r\n          targetIp: from,\r\n          sdp: peerConnection.localDescription\r\n        })\r\n        console.log(`âœ… Answer sent to ${from}`)\r\n\r\n      } catch (error) {\r\n        console.error(`âŒ Offer handling error for ${from}:`, error)\r\n        updateConnectionStatus(from, 'failed')\r\n        cleanupPeerConnection(from)\r\n      }\r\n    })\r\n\r\n    return () => unsubscribeOffer()\r\n  }, [isSocketConnected, emit, on, cleanupPeerConnection, updateConnectionStatus, iceServers])\r\n\r\n  // âœ… Handle answers\r\n  useEffect(() => {\r\n    if (!isSocketConnected) return\r\n\r\n    const unsubscribeAnswer = on('answer', async ({ from, sdp }: any) => {\r\n      console.log(`ðŸ’¬ Answer received from ${from}`)\r\n\r\n      const peerConnection = peerConnectionsRef.current.get(from)\r\n      if (!peerConnection) {\r\n        console.error(`âŒ No PC found for ${from}`)\r\n        return\r\n      }\r\n\r\n      try {\r\n        console.log(`ðŸ“ Setting remote (answer) for ${from}`)\r\n        await peerConnection.setRemoteDescription(new RTCSessionDescription(sdp))\r\n        console.log(`âœ… Answer remote set for ${from}`)\r\n\r\n        // âœ… Process pending ICE candidates after setting remote description\r\n        const pending = pendingCandidatesRef.current.get(from) || []\r\n        for (const candidate of pending) {\r\n          try {\r\n            await peerConnection.addIceCandidate(new RTCIceCandidate(candidate))\r\n            console.log(`âœ… Added pending ICE candidate for ${from}`)\r\n          } catch (error) {\r\n            console.error(`âŒ Error adding pending candidate:`, error)\r\n          }\r\n        }\r\n        pendingCandidatesRef.current.delete(from)\r\n\r\n      } catch (error) {\r\n        console.error(`âŒ Answer error for ${from}:`, error)\r\n        updateConnectionStatus(from, 'failed')\r\n      }\r\n    })\r\n\r\n    return () => unsubscribeAnswer()\r\n  }, [isSocketConnected, on, updateConnectionStatus])\r\n\r\n  // âœ… FIXED: Handle ICE candidates with pending queue\r\n  useEffect(() => {\r\n    if (!isSocketConnected) return\r\n\r\n    const unsubscribeICE = on('ice-candidate', async ({ from, candidate }: any) => {\r\n      if (!candidate) return\r\n\r\n      const peerConnection = peerConnectionsRef.current.get(from)\r\n      if (!peerConnection) {\r\n        console.log(`âš ï¸ No peer connection for ${from}, ignoring candidate`)\r\n        return\r\n      }\r\n\r\n      try {\r\n        // âœ… Check if remote description is set\r\n        if (peerConnection.remoteDescription) {\r\n          await peerConnection.addIceCandidate(new RTCIceCandidate(candidate))\r\n          console.log(`âœ… ICE candidate added for ${from}`)\r\n        } else {\r\n          // âœ… Queue candidate if remote description not set yet\r\n          console.log(`â³ Queueing ICE candidate for ${from} (no remote description yet)`)\r\n          const pending = pendingCandidatesRef.current.get(from) || []\r\n          pending.push(candidate)\r\n          pendingCandidatesRef.current.set(from, pending)\r\n        }\r\n      } catch (error) {\r\n        console.error(`âŒ ICE error for ${from}:`, error)\r\n      }\r\n    })\r\n\r\n    return () => unsubscribeICE()\r\n  }, [isSocketConnected, on])\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      peerConnectionsRef.current.forEach((_, deviceIp) => {\r\n        cleanupPeerConnection(deviceIp)\r\n      })\r\n    }\r\n  }, [cleanupPeerConnection])\r\n\r\n  return {\r\n    connectToDevice,\r\n    disconnectFromDevice,\r\n    sendMessage,\r\n    isDeviceConnected,\r\n    connectionStatuses,\r\n    receivedMessages,\r\n    clearMessages: () => setReceivedMessages([])\r\n  }\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 640, "column": 0}, "map": {"version":3,"sources":["file:///home/user/webrtc-client/app/page.tsx"],"sourcesContent":["'use client'\n\nimport { useEffect, useState, useCallback } from \"react\"\nimport { DeviceData, useDeviceInfo } from \"@/hooks/useDeviceInfo\"\nimport { useSocket } from \"@/hooks/useSocket\"\nimport { useWebRTC } from \"@/hooks/useWebRTC\"\nimport {\n  Plug,\n  Unplug,\n  Smartphone,\n  Loader2,\n  ChevronDown,\n  CheckCircle2,\n  XCircle,\n  Clock,\n  Link2,\n  Wifi,\n  Monitor,\n  Globe2,\n  Send,\n  MessageSquare\n} from \"lucide-react\"\n\nexport default function Home() {\n  const { isConnected: isSocketConnected, connect, disconnect, emit, on } = useSocket()\n  const { deviceInfo, loading } = useDeviceInfo()\n  const [deviceConnected, setDeviceConnected] = useState<boolean | null>(null)\n  const [isRegistering, setIsRegistering] = useState(false)\n  const [devices, setDevices] = useState<DeviceData[]>([])\n  const [messageInput, setMessageInput] = useState<{ [key: string]: string }>({})\n\n  // Initialize WebRTC with renamed prop\n  const { \n    connectToDevice, \n    disconnectFromDevice, \n    sendMessage, \n    isDeviceConnected,\n    connectionStatuses,\n    receivedMessages \n  } = useWebRTC({\n    emit,\n    on,\n    isSocketConnected // Renamed to avoid conflict\n  })\n\n  // Check device connection status\n  const checkConnection = useCallback(() => {\n    if (deviceInfo) {\n      emit('check-connected', deviceInfo)\n    }\n  }, [emit, deviceInfo])\n\n  // Handle show devices event\n  const handleShowDevices = useCallback((data: DeviceData[]) => {\n    console.log('ðŸ“± Received devices:', data)\n    setDevices(data)\n  }, [])\n\n  // Handle check connected response\n  const handleCheckConnected = useCallback((status: boolean) => {\n    console.log(\"âœ… Received check-connected:\", status)\n    setDeviceConnected(status)\n\n    if (!status && !isRegistering) {\n      setIsRegistering(true)\n      console.log(\"ðŸ”„ Device not found, registering...\")\n\n      emit(\"connect-device\", deviceInfo)\n\n      setTimeout(() => {\n        checkConnection()\n        setIsRegistering(false)\n      }, 1000)\n    }\n  }, [isRegistering, emit, deviceInfo, checkConnection])\n\n  // Socket connection effect\n  useEffect(() => {\n    if (!isSocketConnected || !deviceInfo) return\n\n    const unsubscribeCheck = on(\"check-connected\", handleCheckConnected)\n    const unsubscribeDevices = on('show-devices', handleShowDevices)\n\n    checkConnection()\n\n    return () => {\n      unsubscribeCheck()\n      unsubscribeDevices()\n    }\n  }, [isSocketConnected, deviceInfo, on, handleCheckConnected, handleShowDevices, checkConnection])\n\n  // Toggle socket connection\n  const handleToggleConnection = useCallback(() => {\n    if (isSocketConnected) {\n      disconnect()\n      setDeviceConnected(null)\n      setDevices([])\n    } else {\n      connect()\n      setTimeout(() => emit('show-devices'), 1000)\n    }\n  }, [isSocketConnected, disconnect, connect, emit])\n\n  // Handle WebRTC device connection\n  const handleConnectDevice = useCallback(async (device: DeviceData) => {\n    const deviceIp = device?.deviceInfo?.deviceIp\n\n    if (!deviceIp) {\n      console.error('âŒ No device IP found')\n      return\n    }\n\n    console.log('ðŸ”— Connecting to device via WebRTC:', device)\n\n    try {\n      await connectToDevice(device)\n      console.log('âœ… Connection initiated for:', deviceIp)\n    } catch (error) {\n      console.error('âŒ Failed to connect:', error)\n    }\n  }, [connectToDevice])\n\n  // Handle WebRTC device disconnection\n  const handleDisconnectDevice = useCallback((device: DeviceData) => {\n    const deviceIp = device?.deviceInfo?.deviceIp\n    if (!deviceIp) return\n\n    console.log('ðŸ”Œ Disconnecting from device:', deviceIp)\n    disconnectFromDevice(deviceIp)\n  }, [disconnectFromDevice])\n\n  // Handle send message\n  const handleSendMessage = useCallback((deviceIp: string) => {\n    const message = messageInput[deviceIp]?.trim()\n    if (!message) return\n\n    const success = sendMessage(deviceIp, message)\n    if (success) {\n      setMessageInput(prev => ({ ...prev, [deviceIp]: '' }))\n    }\n  }, [messageInput, sendMessage])\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 flex items-center justify-center\">\n        <div className=\"bg-white p-8 rounded-2xl shadow-lg\">\n          <div className=\"flex items-center space-x-3\">\n            <Loader2 className=\"h-8 w-8 text-blue-600 animate-spin\" />\n            <span className=\"text-gray-700 font-medium\">Loading device info...</span>\n          </div>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 p-6\">\n      <div className=\"max-w-7xl mx-auto space-y-6\">\n        {/* Header */}\n        <div className=\"bg-white rounded-2xl shadow-lg p-6 border border-gray-100\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <h1 className=\"text-3xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent mb-2\">\n                Device Connection Manager\n              </h1>\n              <p className=\"text-gray-500 text-sm\">\n                Monitor and control your WebRTC device connections\n              </p>\n            </div>\n\n            <button\n              onClick={handleToggleConnection}\n              className={`px-6 py-2.5 rounded-lg font-medium transition-all duration-200 transform hover:scale-105 active:scale-95 shadow-md flex items-center space-x-2 ${\n                isSocketConnected\n                  ? 'bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white'\n                  : 'bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white'\n              }`}\n            >\n              {isSocketConnected ? (\n                <>\n                  <Unplug className=\"w-5 h-5\" />\n                  <span>Disconnect</span>\n                </>\n              ) : (\n                <>\n                  <Plug className=\"w-5 h-5\" />\n                  <span>Connect</span>\n                </>\n              )}\n            </button>\n          </div>\n        </div>\n\n        {/* Status Cards */}\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n          <div className=\"bg-white rounded-xl shadow-md p-5 border border-gray-100\">\n            <div className=\"flex items-center space-x-3\">\n              <div className={`w-3 h-3 rounded-full ${isSocketConnected ? 'bg-green-500 animate-pulse' : 'bg-red-500'}`}></div>\n              <div className=\"flex-1\">\n                <p className=\"text-xs text-gray-500 uppercase tracking-wide\">Socket Status</p>\n                <p className={`text-lg font-semibold flex items-center space-x-2 ${isSocketConnected ? 'text-green-600' : 'text-red-600'}`}>\n                  {isSocketConnected ? (\n                    <>\n                      <CheckCircle2 className=\"w-5 h-5\" />\n                      <span>Connected</span>\n                    </>\n                  ) : (\n                    <>\n                      <XCircle className=\"w-5 h-5\" />\n                      <span>Disconnected</span>\n                    </>\n                  )}\n                </p>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"bg-white rounded-xl shadow-md p-5 border border-gray-100\">\n            <div className=\"flex items-center space-x-3\">\n              <div className={`w-3 h-3 rounded-full ${\n                deviceConnected === null ? 'bg-yellow-500' : deviceConnected ? 'bg-green-500 animate-pulse' : 'bg-red-500'\n              }`}></div>\n              <div className=\"flex-1\">\n                <p className=\"text-xs text-gray-500 uppercase tracking-wide\">Device Status</p>\n                <p className={`text-lg font-semibold flex items-center space-x-2 ${\n                  deviceConnected === null ? 'text-yellow-600' : deviceConnected ? 'text-green-600' : 'text-red-600'\n                }`}>\n                  {deviceConnected === null ? (\n                    <>\n                      <Clock className=\"w-5 h-5\" />\n                      <span>Checking...</span>\n                    </>\n                  ) : deviceConnected ? (\n                    <>\n                      <CheckCircle2 className=\"w-5 h-5\" />\n                      <span>Registered</span>\n                    </>\n                  ) : (\n                    <>\n                      <XCircle className=\"w-5 h-5\" />\n                      <span>Not Registered</span>\n                    </>\n                  )}\n                </p>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"bg-white rounded-xl shadow-md p-5 border border-gray-100\">\n            <div className=\"flex items-center space-x-3\">\n              <div className={`w-3 h-3 rounded-full ${connectionStatuses.size > 0 ? 'bg-blue-500 animate-pulse' : 'bg-gray-300'}`}></div>\n              <div className=\"flex-1\">\n                <p className=\"text-xs text-gray-500 uppercase tracking-wide\">Active WebRTC</p>\n                <p className=\"text-lg font-semibold text-blue-600\">\n                  {Array.from(connectionStatuses.values()).filter(s => s.status === 'connected').length} Connected\n                </p>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Messages Inbox */}\n        {receivedMessages.length > 0 && (\n          <div className=\"bg-white rounded-2xl shadow-lg p-6 border border-gray-100\">\n            <div className=\"flex items-center space-x-2 mb-4\">\n              <MessageSquare className=\"w-5 h-5 text-blue-600\" />\n              <h2 className=\"text-xl font-bold text-gray-800\">Received Messages</h2>\n            </div>\n            <div className=\"space-y-2 max-h-60 overflow-y-auto\">\n              {receivedMessages.map((msg, idx) => (\n                <div key={idx} className=\"bg-blue-50 border border-blue-200 rounded-lg p-3\">\n                  <div className=\"flex items-center justify-between mb-1\">\n                    <span className=\"text-xs font-mono text-blue-600\">{msg.from}</span>\n                    <span className=\"text-xs text-gray-500\">{new Date(msg.timestamp).toLocaleTimeString()}</span>\n                  </div>\n                  <p className=\"text-sm text-gray-800\">{msg.message}</p>\n                </div>\n              ))}\n            </div>\n          </div>\n        )}\n\n        {isRegistering && (\n          <div className=\"bg-gradient-to-r from-blue-50 to-purple-50 border border-blue-200 rounded-xl p-4 flex items-center space-x-3\">\n            <Loader2 className=\"h-5 w-5 text-blue-600 animate-spin\" />\n            <span className=\"text-blue-700 font-medium\">Registering device...</span>\n          </div>\n        )}\n\n        <div className=\"bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden\">\n          <details className=\"group\">\n            <summary className=\"cursor-pointer p-6 font-semibold text-gray-800 hover:bg-gray-50 transition-colors flex items-center justify-between\">\n              <span className=\"flex items-center space-x-2\">\n                <Smartphone className=\"w-5 h-5\" />\n                <span>My Device Information</span>\n              </span>\n              <ChevronDown className=\"w-5 h-5 text-gray-400 group-open:rotate-180 transition-transform\" />\n            </summary>\n            <div className=\"px-6 pb-6 pt-2\">\n              <pre className=\"bg-gray-50 p-4 rounded-lg text-sm overflow-x-auto border border-gray-200\">\n                {JSON.stringify(deviceInfo, null, 2)}\n              </pre>\n            </div>\n          </details>\n        </div>\n\n        {/* Devices Grid */}\n        {devices.length > 0 && (\n          <>\n            <div className=\"bg-white rounded-2xl shadow-lg p-6 border border-gray-100\">\n              <h2 className=\"text-xl font-bold text-gray-800 mb-2\">Available Devices</h2>\n              <p className=\"text-gray-500 text-sm\">\n                {devices.length} device{devices.length !== 1 ? 's' : ''} found on the network\n              </p>\n            </div>\n\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n              {devices?.map((item, index) => {\n                const deviceIp = item?.deviceInfo?.deviceIp || ''\n                const isWebRTCConnected = isDeviceConnected(deviceIp)\n                const connectionStatus = connectionStatuses.get(deviceIp)\n\n                return (\n                  <div\n                    key={index}\n                    className=\"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1\"\n                  >\n                    <div className={`p-4 ${\n                      isWebRTCConnected \n                        ? 'bg-gradient-to-r from-green-500 to-emerald-600' \n                        : 'bg-gradient-to-r from-blue-500 to-purple-600'\n                    }`}>\n                      <div className=\"flex items-center justify-between\">\n                        <div className=\"flex items-center space-x-3\">\n                          {item?.deviceInfo?.deviceType === 'Mobile' && <Smartphone className=\"w-6 h-6 text-white\" />}\n                          {item?.deviceInfo?.deviceType === 'PC' && <Monitor className=\"w-6 h-6 text-white\" />}\n                          {item?.deviceInfo?.deviceType === 'Web' && <Globe2 className=\"w-6 h-6 text-white\" />}\n\n                          <div>\n                            <h3 className=\"text-white font-semibold text-lg\">\n                              {item?.deviceInfo?.name || 'Unknown Device'}\n                            </h3>\n                            <p className=\"text-blue-100 text-xs\">\n                              {item?.deviceInfo?.deviceType || 'Unknown Type'}\n                            </p>\n                          </div>\n                        </div>\n\n                        <div className={`w-3 h-3 rounded-full ${\n                          isWebRTCConnected ? 'bg-white' : 'bg-green-400'\n                        } animate-pulse`}></div>\n                      </div>\n                    </div>\n\n                    <div className=\"p-4 space-y-3\">\n                      <div className=\"flex items-center space-x-2 text-gray-700\">\n                        <Smartphone className=\"w-4 h-4 text-gray-400\" />\n                        <div className=\"flex-1\">\n                          <p className=\"text-xs text-gray-500\">Model</p>\n                          <p className=\"text-sm font-medium\">\n                            {item?.deviceInfo?.deviceModel || 'N/A'}\n                          </p>\n                        </div>\n                      </div>\n\n                      <div className=\"flex items-center space-x-2 text-gray-700\">\n                        <Wifi className=\"w-4 h-4 text-gray-400\" />\n                        <div className=\"flex-1\">\n                          <p className=\"text-xs text-gray-500\">IP Address</p>\n                          <p className=\"text-sm font-medium font-mono\">\n                            {deviceIp || 'Not Available'}\n                          </p>\n                        </div>\n                      </div>\n\n                      {connectionStatus && (\n                        <div className={`flex items-center space-x-2 rounded-lg p-2 ${\n                          connectionStatus.status === 'connected' ? 'bg-green-50 border border-green-200' :\n                          connectionStatus.status === 'connecting' ? 'bg-yellow-50 border border-yellow-200' :\n                          'bg-red-50 border border-red-200'\n                        }`}>\n                          {connectionStatus.status === 'connected' && <CheckCircle2 className=\"w-4 h-4 text-green-600\" />}\n                          {connectionStatus.status === 'connecting' && <Loader2 className=\"w-4 h-4 text-yellow-600 animate-spin\" />}\n                          {connectionStatus.status === 'failed' && <XCircle className=\"w-4 h-4 text-red-600\" />}\n                          <span className=\"text-xs font-medium capitalize\">\n                            {connectionStatus.status}\n                          </span>\n                        </div>\n                      )}\n\n                      {/* Message Input - Only show when connected */}\n                      {isWebRTCConnected && (\n                        <div className=\"space-y-2\">\n                          <div className=\"flex space-x-2\">\n                            <input\n                              type=\"text\"\n                              value={messageInput[deviceIp] || ''}\n                              onChange={(e) => setMessageInput(prev => ({ ...prev, [deviceIp]: e.target.value }))}\n                              onKeyPress={(e) => e.key === 'Enter' && handleSendMessage(deviceIp)}\n                              placeholder=\"Type a message...\"\n                              className=\"flex-1 px-3 py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                            />\n                            <button\n                              onClick={() => handleSendMessage(deviceIp)}\n                              className=\"bg-blue-500 hover:bg-blue-600 text-white p-2 rounded-lg transition-colors\"\n                            >\n                              <Send className=\"w-4 h-4\" />\n                            </button>\n                          </div>\n                        </div>\n                      )}\n\n                      <div className=\"border-t border-gray-200 my-3\"></div>\n\n                      {isWebRTCConnected ? (\n                        <button\n                          onClick={() => handleDisconnectDevice(item)}\n                          className=\"w-full bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white font-medium py-2.5 px-4 rounded-lg transition-all duration-200 transform hover:scale-105 active:scale-95 shadow-md flex items-center justify-center space-x-2\"\n                        >\n                          <Unplug className=\"w-4 h-4\" />\n                          <span>Disconnect</span>\n                        </button>\n                      ) : (\n                        <button\n                          onClick={() => handleConnectDevice(item)}\n                          className=\"w-full bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white font-medium py-2.5 px-4 rounded-lg transition-all duration-200 transform hover:scale-105 active:scale-95 shadow-md flex items-center justify-center space-x-2\"\n                        >\n                          <Link2 className=\"w-4 h-4\" />\n                          <span>Connect Device</span>\n                        </button>\n                      )}\n                    </div>\n                  </div>\n                )\n              })}\n            </div>\n          </>\n        )}\n\n        {devices.length === 0 && isSocketConnected && (\n          <div className=\"bg-white rounded-2xl shadow-lg p-12 border border-gray-100 text-center\">\n            <Smartphone className=\"w-16 h-16 text-gray-300 mx-auto mb-4\" />\n            <h3 className=\"text-xl font-semibold text-gray-700 mb-2\">No Devices Found</h3>\n            <p className=\"text-gray-500\">\n              Waiting for devices to connect to the network...\n            </p>\n          </div>\n        )}\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}